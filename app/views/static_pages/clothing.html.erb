<script type='text/javascript'>//<![CDATA[ 

var initialData = [
    {clothingType: "Short Sleeve Jersey", clothingPicture: "http://i.imgur.com/uIaUg.jpg", amount: []},
    {clothingType: "Short Sleeve Jersey2", clothingPicture: "http://www.aerotechdesigns.com/smartwool/17800-rambition-short.gif", amount: []    },
    
];
 
var ContactsModel = function(clothingOrders, name, email) {
    var self = this;
    this.name = ko.observable(name);
    this.email = ko.observable(email);
    availableQuantities = ko.observableArray(['1', '2', '3', '4','5']);
                chosenQuantities = ko.observable(['1']);
    self.clothingOrders = ko.observableArray(ko.utils.arrayMap(clothingOrders, function(clothingOrder) {
        return  { 
                clothingType: clothingOrder.clothingType, 
                clothingPicture: clothingOrder.clothingPicture, 
                amount: ko.observableArray(clothingOrder.amount),

                 };
    }));
 

    self.addOrder = function(clothingOrder) {
        clothingOrder.amount.push({
            quantity: chosenQuantities, 
            size: ""
        });
    };
 
    self.removeOrder = function(amount) {
        $.each(self.clothingOrders(), function() { this.amount.remove(amount) })
    };
 
    self.save = function() {
        self.lastSavedJson(JSON.stringify(ko.toJS(self.contacts), null, 2));
    };
    self.lastSavedJson = ko.observable("")
};
 
 $(document).ready(function() {
    jsonModel = new ContactsModel(initialData, "", "");
    ko.applyBindings(jsonModel);
  });
  
  
//ko.applyBindings(new ContactsModel(initialDataOrder));
//]]>  

</script>

<body>
  <div class='liveExample'> 
    <br>
    <br>
      <p>Name: <input data-bind="value: name" /></p>
        <p>Email: <input data-bind="value: email" /></p>
        <br>
        <br>
    <div id='clothingOrdersList'>
        <table class='clothingOrdersEditor'>
         
        
            <tbody data-bind="foreach: clothingOrders">
             
                <tr>
                    <td>
                        <ul>
                          <li><span data-bind='text: clothingType' /></li>
                          <li><img data-bind="attr: {src: clothingPicture, width: 200}"></li>
                        </ul>
                    </td>
                    
                    <td>
                        <table>
                          <tr>
                                <td>Quantity</td>
                                <td>Size</td>
                              </tr>

                            <tbody data-bind="foreach: amount">

                                <tr>
                                    <td><select data-bind="options: availableQuantities, selectedOptions: chosenQuantities"></select></td>
                                    <td><input data-bind='value: size' /></td>
              
                                    <td><a href='#' data-bind='click: $root.removeOrder'>Delete</a></td>
                                </tr>
                            </tbody>
                        </table>
                        <a href='#' data-bind='click: $root.addOrder'>Add <span data-bind="text: clothingType + ' To Order'"></a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
     
    <p>
        <button data-bind='click: save, enable: clothingOrders().length > 0'>Save to JSON</button>
    </p>
     
    
</div>
  


</body>


</html>

